---
title: "イリュージョン サーバーレス & クラウド"
date: 2023-05-24
author: "Nova Annabella"
slug: illusion_serverless_cloud
tags: [ Development, Serverless, Cloud, Microservices, Scalability, Architecture, Infrastructure ]
categories: [ Technology, Software, Cloud ]
description: "クラウドのサーバーレス機能の課題と現実。クラウドへの移行を検討している企業にとって貴重な洞察力。"
draft: false
images:
  - "/images/content/onprem_vs_cloud.png"
card: "summary_large_image"
---


# サーバーレス関数のクラウド内でのイリュージョン

![aws_costs_twitter_1](/images/content/onprem_vs_cloud.png)

### 序論

私は、マーケティングが如何に頻繁に健全な判断を勝つのかに失望しています。多くのマネージャーは自分自身の専門家である開発者を無視します。これはクラウドへの移行にも当てはまります。ネタバレ：お金を節約しなければならない人は、クラウドを避けるべきです。なぜなら新しいバズワードの"サーバーレス"はクラウド上で次の意味を持ちます：あなたがソフトウェアの面倒を見、私たちがハードウェアの管理をします。しかし、あなたが有能で、モチベーションがあり、好奇心旺盛な管理者を持っていれば、「サーバーレス」も自分で運用することができます（例えば、[KNative](https://knative.dev)）。

![aws_costs_twitter_1](/images/content/aws_costs_twitter_1.png)

### サーバーレス関数 vs マイクロサービス:



#### マイクロサービス

典型的なステートレスマイクロサービスは特定の機能/ドメインを担当し、コンテナのオーケストレーション環境で提供されます。この環境は、インフラ、セキュリティ、ファイアウォール、ログ、メトリクス、シークレット、ネットワーク、バックアップなど多くの
ことを管理します。大きな利点は、マイクロサービスがローカルで少ないリソースで統合テストが可能であり、クラウド/サーバーに依存しない（どこでも利用可能）であることです。

#### サーバーレス関数

事前に小さな冗談：パラドックスですが、真実です-サーバーレス機能は大いにサーバー環境に依存しています。 :)
典型的なサーバーレス機能もまた特定の機能/ドメインのみを処理し、フレームワークなしで
純粋なコードで書かれることで、マイクロサービスよりも高速になることを目指しています（これもマイクロサービスにとっての良いエクササイズ）。大きい
利点は、サーバーレス機能が自動的にスケーリングされることです。ただし、各サーバーレス機能には
セキュリティ、ファイヤーウォール、ネットワーク、ログ、メトリクス、
シークレット、キャッシング、バックアップなど、インフラを定義するための大量のGlueCodeが必要です。
そのため、APIを含むファイルのコピーなどの簡単な機能でも、コード（IaCを含む）がすぐに1500行にもなることがあります。
管理コストは、管理から開発へと1:N（1からサーバーレスまで）
機能）。知識と実装はこれにより
集約されていなく、すぐに不安定になる可能性があります。さらに、維持費が増加します。
また、サーバーレスの統合テストは稀で、または大変な労力をかけて行われることがあります。
結局のところ、サーバーレス機能の複雑さは個々のマイクロサービスよりも明らかに高いです。
複雑さが増すと、保守性も低くなります。新しいチームメンバーにとっては困難で、明らかに
より多くの知識が必要です。

### サーバーレスと一般的なクラウド

ほとんどのクラウド技術は最新のものではありません。たとえば、Node.js、Java、Pythonなどの言語や技術は、更新が困難で、ほとんど待つしかありません。
また、MongoDB、MySQL、Kafka、NATS、RabbitMQ、Redis、Prometheus、InfluxDB、Grafana、
Kibana、Elastic Searchなどの現代的で標準的な技術は、利用できないか、費用がかかりすぎます。
これらのスタンダードサービスがない場合、しばしば仮想的な石器時代になり、古くなったソリューション、たとえば
外部へのコミュニケーションにWebhooksを使用します。さらに、規制、
コンプライアンス、データプライバシー、信頼性についての裁量が大幅に制限されます。

したがって、クラウドは、AWS、Azure、Google、On-Premiseなど、すばやく
コストを比較したり切り替えたりできるように、アプリカジョンに依存しない形で運用されるべきです。
クラウドでも制限があり、それが創造的な回避策につながり、複雑さを増したりします。また、包括的なテストもコストがかかります。なぜなら、各開発者がクラウドで自己の開発環境を
必要とする一方、多くのクラウドサービスはほとんどまたはまったくローカルでテストできないからです。
しかしながら、テストがない状態でもクラウドは高い。オンプレミスシステムでは主に
ハードウェアコストが発生しますが、クラウドではさらにトラフィック、いくつかのスタンダードサービス、そしてしばしば
二重課税のための追加の支払いが必要です。おまけに、クラウドでは簡単に全体像を見失います。なぜなら、それがユーザーフレンドリーさではなく
コストについて扱われているからです。コストはそんなに隠されていて、それに気づくのは遅すぎる時です。

クラウドと特にサーバーレスの領域で、アーキテクチャとインフラの基礎は
新たに発明されなければなりません。なぜなら、その実装は利用できる機能に大きく依存するからです。
アーキテクチャを設計した後に思うことはいつもこれです："それは一つのサービスでよかっただろう"。

私にとって、サーバーレスは興味深い考え方であり、スケールするのが容易ですが、コストを下げるものではありません。むしろ、それは開発においてもっと多くの知識と時間を必要とします。サーバーレスやクラウドは規律と前知識が必要です。
もしオンプレミスシステムに対する知識がなければ、クラウドを使うことで簡単にはならないでしょう。
開発者はどのようにしてインフラストラクチャの知識を追加で身につけることができるのでしょうか？

私は、クラウドアーキテクチャよりも、適切に管理されたKubernetesクラスタを選びます。
スタッフはスケーリングしません。多くの開発者はコードを書くための規律がありません。
残念ながら、これは開発者の80%に当てはまります。どのようにして、これらの開発者がクラウドを操作できるようにするのでしょうか？

組織がサーバーレスアーキテクチャとクラウドの課題と影響を全面的に理解することは重要です。これには、技術的な知識だけでなく、戦略的なアプローチも必要です。軽率なクラウドへの移行は複雑さ、高いコスト、開発者の過負荷に繋がる可能性があります。

要約すると、クラウド上のサーバーレスは有望なコンセプトではありますが、慎重に考慮すべきです。コスト、複雑さ、維持可能性、開発チームの能力を考慮する必要があります。
すべての会社には異なる要求と優先順位があります。クラウド上のサーバーレスが最適な解決策であるか、それとも他のアプローチ
例えば、適切なKubernetesクラスタがより良い選択であるかどうか、考え抜いた決定を下すべきです。

サーバーレスとクラウドコンピューティングの成功は、技術的な専門知識と
戦略的な計画、ビジネス要件の明確な理解の組み合わせに依存します。そのみなさんがサーバーレスの幻想を
見透かし、自社のソフトウェア開発に最適な決断を下すことができます。

### 結論

クラウドでのサーバーレス関数の導入は、柔軟性、スケーラビリティ、およびエンジニアの インフラストラクチャタスクからの解放を約束します。しかし、この幻想には惑わされてはならない。クラウドへの
移行とサーバーレス関数の使用は、多くの課題をもたらします。 開発者は、実際の開発以外に新しい「言語」を学習し、適切なサポートがない場合は 更なる責任を負う必要があります。
サーバーレス関数の複雑さは、開発者がインフラストラクチャ定義、セキュリティ、スケーリングなど、多くの追加 タスクを引き受ける必要があるため、マイクロサービスよりも高いことが多い。真の統合テストは
困難で、運用のための先行知識と経験はクラウドでさらに重要となります。 クラウド自体もさらなる課題をもたらします。多くのクラウド技術は最新のものでは
ありませんし、最新の標準サービスを利用することは高価であったり、不可能であったりする場合があります。規制要件、コンプライアンス、および データプライバシーは遊びの幅を制限します。また、クラウドのコストは容易にコントロールを失い、
支出の全体像をすぐに見失うことがあります。 全体として、サーバーレスとクラウドの利点と欠点を慎重に比較検討する必要があります。 企業は、特定の要件、チームの既存のノウハウ、クラウドへの移行の長期的な影響を 考慮するべきです。
包括的な分析に基づいた明確な意思決定は、プロジェクトの成功と収益性にとって非常に重要です。
最終的には、企業には、開発者を適切にサポートし、クラウドのコストと複雑性を現実的に評価し、よく管理されたKubernetesクラスターなどの代替ソリューションを検討する責任があります。
明確な戦略と自社のニーズに対する深い理解を持つことで、企業はクラウドとサーバーレス機能の利点を最大限に活用し、幻想を見抜くことができます。

### 連絡先

[GitHubの問題](https://github.com/NovaAnnabella/the_unspoken/issues/new/choose)。
