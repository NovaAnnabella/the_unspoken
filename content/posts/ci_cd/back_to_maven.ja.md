---
title: "Mavenに戻る?"
date: 2023-05-01
author: "Nova Annabella"
slug: back_to_maven
tags: [ Development, Gradle, Maven, CI_CD ]
categories: [ Technology, Software ]
description: "難しく捉えられるシンプルさを求める探求と、Mavenの力を再発見する短い旅の翻訳。"
draft: false
images:
  - "/images/content/maven_vs_gradle.png"
card: "summary_large_image"
---


# Mavenに戻る？

[![maven_vs_gradle](/images/content/maven_vs_gradle.png)](https://phauer.com/2018/moving-back-from-gradle-to-maven/)

## 10年間のGradle。安堵の探求とMavenの強さの再発見への短い旅。



### 開発者のポテンシャルの最大化 - 私たちはもっと時間節約ツールが必要です

私が興味を持つのは、よく見落とされたり、あまり議論されないテーマです。素晴らしいテクノロジーが使われていることが多いのですが、それに伴う問題についてはほとんど語られません。 開発は今日では非常に手間がかかるようになりました。
"Serverless"、"Low Code"、"IaC"、"Big Data"、"Cloud"、"DevOps"、"You Build it You run
it"など、カッコいいバズワードが溢れており、開発者は既に余裕以上の付加的な課題に直面しています。タスクが増えると、専門家がほとんどいなくなり、何かが焦点を失うことが常にあります。それゆえ、自動化と時間節約は非常に重要です。”Don’t
make me think”や"Works out of the Box"などの品質指標は、私がまだGradleで見ていないものです。公平を期すために、Gradleは私たちに作業を増やすだけの現代的なツールだけではありません。

### 簡易性と自動化への幻影的な追求

SOAP以来、私はXMLベースの設定に対して深い嫌悪感を抱いています。Gradleを使用することで、バインドスクリプトの作成が簡単になることを期待していましたが、
残念ながら、私の期待とモチベーションは次第に低下していきました。Gradleは柔軟性を追求しており、そのために自動化と品質を犠牲にしています。開発者たちは ソフトウェアの信頼性に影響を与えることなくトレンドに盲目的に追従しています。Grad
leビルドスクリプトをシンプルでメンテナンスが容易に保つためには、強い規律が求められます。そのような規律はソースコード中にはめったに見つけられず、そのためビルドスクリプト中でもそれはさらに稀です。

### 翻訳と回避策 - ビルドスクリプトが挑戦になるとき

GradleはバックグラウンドでMavenとあまり変わらない方法で動作します。したがって、いくつかの翻訳が必要です。Dependency Catalog、Maven Release
Plugin、Dependabotなどの機能は、基本的にはMavenがすでに備えている基本機能のワークアラウンドです。 Gradleの柔軟性により、しばしば複雑なビルド設定が生じ、維持が難しくなります。 Gradleプラグインは、互換性の問
題、制限、または限定的な開発が頻繁に発生します。これらの問題は、Gradleエコシステムの進化する性質、Gradleが使用されるさまざまな環境、および各プラグインの特定の実装と保守の労力のために生じます。全ては相互に関連しています。

### Gradleのドミノ効果 - 実世界での悪夢のシナリオ

私は数年しか経っていないマイクロサービスをたくさん見てきましたが、既にGradleのせいで保守できなくなっていました。
これが初めてのことだと言うことは重要であり、いえ、それらはジュニアデブではありませんでした。

私の**任務は、Spring Boot 2.xを2.7にアップグレードすることでした**。ネタバレ：私は一年後に諦めました！問題は簡単に言うと：

* Gradleビルドファイルが必要 -> 私のローカルJavaバージョンを11にダウングレード（WTF）（通常Javaは下位互換性がある 
- ここでもSdkManのような回避ツールがあります...）
* Spring Bootアップデートが必要 -> Gradleアップデート（WTF）
* Gradleアップデートが必要 -> プラグインアップデート
* プラグインアップデートが必要 -> Groovyアップデート（WTF）
* Groovyアップデートが必要 -> テストフレームワークとテストのアップデート（WTF）
* テストフレームワークアップデートが必要 -> 依存性のアップデート
* \[...]
さらに、一部のプラグインは新しいGradleバージョンとは互換性がなく、一部は開発が中止され、他のプラグインと互換性がない、Gradle KTSだけでなくGradle Groovyでも機能する、あるいは単純にリミットがあります。 Springのような大手供給業者のプラグインでも、Mavenプラグインと比較して機能が制限されています。結果的に、誰も正しくメンテナンスできないクールな短いGradleビルドファイルが手に入りました。デベロッパーでさえも、それを書いた人たちはまだGradleを愛しています。私が知っているのは、Gradleのスクリプトを真剣に理解하たり書くことができる人はわずかしかいません。

### Mavenの力の再発見 - Mavenの魔法の力を利用する

これが私のお気に入りのMavenの機能です：
プラグインは、定義することなく直接コマンドラインから起動、設定することができます。プラス他のプラグイン構成から大きく独立しています。

| 例のコマンド                        | 説明                                                                                                                                                | リンク                                                                  | 
|-----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
| `mvn versions:use -latest-versions`   | バージョンをアップデートする - Dependabotは誰が必要？はい、私のプロジェクトは何年もの間、面倒なマージリクエストなしで最新版に問題なくアップデートされています | https://www.mojohaus.org/versions/versions-maven-plugin/plugin-info.html |
| `mvn versions:set -DnewVersion=1.0.0` | プロジェクトのバージョンを設定...                                                                                                                              | https://www.mojohaus.org/versions/versions-maven-plugin/index.html       |
| `mvn license:add-third-party`         | 依存関係をリストし、それらのライセンスを表示（除外されたライセンスでさえ失敗する可能性があります）                                                  | https://www.mojohaus.org/license-maven-plugin/index.html                 | 

このリストは永遠に続きそうです。それはなんとなくGitHub Workflow Stepsを思い出させます。

![maven_plugin_command_line_args](/images/content/maven_plugin_command_line_args.png)


### あなたはXMLが好きではありませんか？

問題なし！ あなたのビルドファイルを `ruby`、`groovy`、`scala`、`yaml`、`atom`、または `Java` で書いてください。 Polygot Extension (https://github.com/takari/polyglot-maven) がそれを可能にします。 試すには、`mvn io.takari.polyglot:polyglot-translate-plugin:translate -Dinput=pom.xml -Doutput=pom.yaml` を実行し、数ミリ秒であなたのビルドファイルが翻訳されます。 残念ながら、信頼性のあるMaven <> Gradle変換器はありません:(
はい、Mavenビルドファイルは大きいですが、非常に理解しやすいものです。 改良やデバッグはすぐに行うことができます。

### 年齢はただの数 - マーベンの安定性と進化

確かに、Mavenはすでにかなりの時間が経っていて、その美学は今日の基準には必ずしも合致していないかもしれません。
しかし、Mavenの長寿性により、適応し、進化することが可能になりました。Mavenはあなたのプロジェクトとは独立して動作します。 ビルドファイルは簡単に再利用することができます。
プラグインはサンドボックス内で動作し、互いに独立しており、JavaバージョンまたはMavenバージョンに関係なく動作します。 この設計は安定性と予測可能性を促進し、予期しない
コンフリクトなしに複雑なビルドプロセスを管理することを簡単にします。

### 結論

現在、開発環境は開発者にとって多くのタスクと技術で溢れています。簡易性と自動化を求めて、Gradleは現代のビルドツールとして現れましたが、独自の課題を引き起こしています。疑いようもなく、Gradleの概念は良いです！しかし、Gradleの
ビルドスクリプトに投資する時間と複雑さを考えると、Mavenを拡張した方がより簡単ではないかという疑問が浮かびます。プラグインと拡張機能を用いれば、Mavenをいつでもリフレッシュして簡潔にすることが可能です。技術から技術へと移行するのでは
なく、発展を続ける方がずっとエキサイティングで、また持続可能ではないでしょうか？

### リンク

* [Gradleからmavenへの戻り](https://phauer.com/2018/moving-back-from-gradle-to-maven/)

### 連絡先

[GitHubの問題](https://github.com/NovaAnnabella/the_unspoken/issues/new/choose).
