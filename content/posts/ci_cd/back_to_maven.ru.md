---
title: "Вернуться к Maven?"
date: 2023-05-01
author: "Nova Annabella"
slug: back_to_maven
tags: [ Development, Gradle, Maven, CI_CD ]
categories: [ Technology, Software ]
description: "Поиск простоты - трудная задача, и краткое путешествие к повторному обнаружению силы Maven"
draft: false
images:
  - "/images/content/maven_vs_gradle.png"
card: "summary_large_image"
---


# Возвращаемся к Maven?

[![maven_vs_gradle](/images/content/maven_vs_gradle.png)](https://phauer.com/2018/moving-back-from-gradle-to-maven/) 

[Перевод отсутствует, так как это код на английском языке]

## 10 лет Gradle. В поисках облегчения и коротком путешествии к повторному обнаружению силы Maven.

``` ```

### Максимизация потенциала разработчиков - Нам нужны более экономные по времени инструменты

Темы, которые часто игнорируются или редко обсуждаются, меня интересуют. Часто используются крутые технологии,
но мало кто говорит о связанных с ними проблемах.
Разработка сегодня стала очень трудоемкой. 
С крутыми словами-модными тенденциями, такими как "Serverless", "Low Code", "IaC", "Big Data", "Cloud", "DevOps", "You Build it You run it" и другие, разработчикам приходится выполнять много дополнительных задач. Больше задач означает, что почти нет экспертов и всегда есть что-то, на что не обращают внимание. Поэтому автоматизация и экономия времени являются важными. "Не заставляй меня думать" и "Работает сразу после распаковки" - уже хорошие показатели качества, которых я не вижу в Gradle. Честно говоря, Gradle - это не единственный современный инструмент, который создает нам проблемы вместо упрощения нашей работы.

### Иллюзорный поиск простоты и автоматизации

С момента появления SOAP у меня глубоко закоренело нежелание использовать конфигурации на основе XML. С Gradle я
надеялся, что написание скриптов привязки станет легкой задачей. К сожалению, мои надежды и мотивация с каждым разом
уменьшались. Gradle стремится к гибкости и жертвует для этого автоматизацией и качеством. Разработчики слепо следуют
моде, не обращая внимание на влияние на надежность программного обеспечения. Чтобы сохранять сценарии сборки Gradle
простыми и легкими в обслуживании, необходимо сильное дисциплинирование. Такая дисциплина уже редко встречается в
исходном коде, поэтому в сценариях сборки она еще более редка.

### Переводы и обходные пути - когда скрипты сборки становятся вызовом

Gradle работает в фоновом режиме не намного иначе, чем Maven. Поэтому некоторые переводы необходимы. Функции, такие как
Dependency Catalog, Maven Release Plugin, Dependabot и многие другие, являются фактически обходными путями для основных
функций, которые уже имеются в Maven. Гибкость Gradle часто приводит к созданию сложных конфигураций сборки,
которые трудно поддерживать.
У плагинов Gradle часто возникают проблемы совместимости, ограничения или ограниченное развитие. Эти проблемы возникают
из-за развивающейся природы экосистемы Gradle, разнообразия сред, в которых используется Gradle,
и специфических задач реализации и поддержки для каждого плагина. Всё связано друг с другом.

### Эффект Домино от Gradle - кошмарная ситуация в реальном мире

Я видел много микросервисов, которые были всего лишь несколько лет и уже из-за Gradle были неспособны к обслуживанию. Стоит отметить, что это не первый раз, когда я видел такое, и нет, это не были Junior Devs.

Моя **задача была обновить Spring Boot 2.x до 2.7**. Спойлер: я сдался через год! Проблемы вкратце:

* Файл Gradle-Build требует -> откат моей местной версии Java до 11 (WTF) (Обычно Java обратно совместима - здесь также есть инструменты-Workaround, такие как SdkMan...)
* Обновление Spring Boot требует -> обновления Gradle (WTF)
* Обновление Gradle требует -> обновления плагина
* Обновление плагина требует -> обновления Groovy (WTF)
* Обновление Groovy требует -> обновления Test-Framework и обновления тестов (WTF)
* Обновления Test-Framework требует -> обновлений зависимостей
* [...]

Кроме того, некоторые плагины не работают с более новыми версиями Gradle, некоторые больше не развиваются, несовместимы с другими плагинами, работают только с Gradle KTS, а не с Gradle Groovy или имеют простые ограничения. Даже плагины крупных поставщиков, таких как Spring, имеют ограниченную функциональность по сравнению с их Maven-плагинами. В конце концов, у меня есть крутой, короткий файл Gradle-Build, который никто не может правильно обслуживать, даже разработчики, которые его написали, и они по-прежнему любят Gradle. Я знаю только немногих, кто серьезно понимает сценарии Gradle или может их написать.

### Открытие снова силы Maven - Использование волшебных возможностей Maven

Вот мои любимые функции Maven:
Плагины можно запустить и настроить непосредственно из командной строки, без их предварительного определения. Кроме того, они в значительной степени независимы от других конфигураций плагинов.

| Пример команды                       | Описание                                                                                                                                                         | Ссылка                                                                   |
|--------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|
| `mvn versions:use -latest-versions`  | Обновление версий - кто нуждается в Dependabot? Да, мои проекты на протяжении многих лет без проблем обновляются до последней версии без необходимости объединения. | https://www.mojohaus.org/versions/versions-maven-plugin/plugin-info.html |
| `mvn versions:set -DnewVersion=1.0.0`| Установка версии проекта...                                                                                                                                      | https://www.mojohaus.org/versions/versions-maven-plugin/index.html       |
| `mvn license:add-third-party`        | Перечисляет зависимости и показывает их лицензии (даже может завершиться неудачей при исключении лицензий)| https://www.mojohaus.org/license-maven-plugin/index.html                 |

Этот список мог бы продолжаться бесконечно. Он как-то напоминает шаги рабочего процесса GitHub.

![maven_plugin_command_line_args](/images/content/maven_plugin_command_line_args.png)

### Ты не любишь XML?

Нет проблем! Просто напишите свой файл сборки на `ruby`, `groovy`, `scala`, `yaml`, `atom` или `Java`. Расширение для Polygot (https://github.com/takari/polyglot-maven) делает это возможным. Чтобы попробовать, просто выполните `mvn io.takari.polyglot:polyglot-translate-plugin:translate -Dinput=pom.xml -Doutput=pom.yaml`, и через несколько миллисекунд ваш файл сборки будет переведен. Жаль, что нет надежного переводчика Maven <> Gradle :(
Да, файлы сборки Maven большие, но их легко понять. Исправления или отладка выполняются за считанные секунды.

### Возраст - это всего лишь число: стабильность и эволюция Mavens

Признаться, Maven уже существует достаточно долго, и, возможно, его эстетика не соответствует современным стандартам.
Однако, долговечность Maven позволила ему адаптироваться и развиваться. Maven работает независимо от вашего проекта.
Файлы сборки могут легко повторно использоваться. Плагины работают в песочнице и независимы друг от друга и от версий
Java или Maven. Этот дизайн способствует стабильности и предсказуемости, и делает управление сложными процессами сборки
без неожиданных конфликтов легким.

### Заключение

В настоящее время среда разработки перегружена множеством задач и технологий для разработчиков. В поисках простоты и
автоматизации появился Gradle как современный инструмент сборки, но он также имеет свои собственные вызовы. Безусловно,
концепция Gradle хороша! Но учитывая сложность и время, затраченное на сборочные скрипты Gradle, возникает вопрос, не
было бы проще расширить Maven. С помощью плагинов и расширений Maven можно в любой момент обновить и упростить. Было бы
интереснее и более устойчиво развивать, чем переходить от одной технологии к другой?

### Ссылки

* [Переход обратно от Gradle к Maven](https://phauer.com/2018/moving-back-from-gradle-to-maven/)

### Контакт

[Проблемы GitHub](https://github.com/NovaAnnabella/the_unspoken/issues/new/choose).```
